---
const videos = [
  {
    id: "KhT-CxVF7BM",
    title: "Noites mal-dormidas podem causar doenças",
  },
  {
    id: "jDECIYND4m8",
    title: "Doenças causadas pelo tempo seco",
  },
  {
    id: "ypSeR6Yj38c",
    title: "SONO - O QUE É PRECISO SABER PARA TER SONO DE BOA QUALIDADE?",
  }
];
---

<section id="midia" class="py-20 md:py-32 bg-brand-navy relative overflow-hidden">
  
  <!-- Subtle bg texture -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute top-20 right-0 w-96 h-96 bg-brand-gold rounded-full blur-[150px]"></div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    
    <!-- Section Header -->
    <div class="mb-12 md:mb-16 text-center md:text-left">
      <p class="text-brand-gold font-sans text-[10px] md:text-xs tracking-[0.4em] uppercase font-medium mb-4">
        Referência Nacional
      </p>
      <h2 class="font-serif text-4xl md:text-6xl text-white mb-6">
        Na <span class="text-brand-gold italic">Mídia</span>
      </h2>
      <div class="h-px w-24 bg-brand-gold/50 mx-auto md:mx-0"></div>
    </div>

    <!-- Content Grid: Videos -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12">
      
      {videos.map((video) => (
        <div class="flex flex-col gap-4">
          <!-- YouTube Facade (loads iframe only on click) -->
          <div 
            class="yt-facade relative rounded-2xl overflow-hidden shadow-2xl shadow-black/30 bg-black aspect-video cursor-pointer group"
            data-video-id={video.id}
            data-video-title={video.title}
            role="button"
            tabindex="0"
            aria-label={`Reproduzir vídeo: ${video.title}`}
          >
            <!-- Thumbnail -->
            <img 
              src={`https://img.youtube.com/vi/${video.id}/hqdefault.jpg`}
              alt={video.title}
              width="480"
              height="360"
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
              loading="lazy"
              decoding="async"
            />
            <!-- Dark overlay -->
            <div class="absolute inset-0 bg-black/30 group-hover:bg-black/20 transition-colors duration-300"></div>
            <!-- Play button -->
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-16 h-16 md:w-20 md:h-20 bg-white/90 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300">
                <svg class="w-6 h-6 md:w-8 md:h-8 text-brand-navy ml-1" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z"/>
                </svg>
              </div>
            </div>
          </div>
          
          <h3 class="font-serif text-lg text-white leading-snug group-hover:text-brand-gold transition-colors duration-300">
            {video.title}
          </h3>
        </div>
      ))}

    </div>

  </div>
</section>

<script>
  const facades = document.querySelectorAll('.yt-facade');
  
  function loadVideo(facade) {
    if (!facade) return;
    const videoId = facade.getAttribute('data-video-id');
    const videoTitle = facade.getAttribute('data-video-title');
    
    const iframe = document.createElement('iframe');
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
    iframe.title = videoTitle;
    iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
    iframe.allowFullscreen = true;
    iframe.className = 'absolute inset-0 w-full h-full';
    
    facade.innerHTML = '';
    facade.classList.remove('cursor-pointer', 'group');
    facade.appendChild(iframe);
  }

  facades.forEach(facade => {
    facade.addEventListener('click', () => loadVideo(facade));
    facade.addEventListener('keydown', (e) => {
        // @ts-ignore
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        loadVideo(facade);
      }
    });
  });
</script>
